#!/usr/bin/env ruby
$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '..', 'lib')

require 'tddium'
require 'rubygems'
require 'rake'
require 'fileutils'

gem 'rspec', ">1.2.6"
require 'spec/rake/spectask'

gem "selenium-client", ">1.2.16"
require "selenium/rake/tasks"

namespace :config do
  task :init do
    init_task
  end

  task :reset do
    rm CONFIG_FILE_PATH, :force => true
  end
end

namespace :test do
  Spec::Rake::SpecTask.new('sequential') do |t|
    t.pattern = "**/*_spec.rb"
    t.spec_opts << '--color'
    t.spec_opts << "--require 'rubygems,selenium/rspec/reporting/selenium_test_report_formatter'"
    t.spec_opts << "--format=Selenium::RSpec::SeleniumTestReportFormatter:./tmp/test_report.html"
    t.spec_opts << "--format=progress"                
    t.fail_on_error = true
    t.verbose = true
  end
end

begin
  Rake::Task[ARGV.first].execute
rescue RuntimeError
  puts "Unknown command '#{ARGV.first}'.  Try one of:"
  puts
  Rake::Task.tasks.each do |t|
    puts t
  end
  puts
end


